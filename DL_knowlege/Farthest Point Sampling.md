# 什么是点云处理中的 Farthest Point Sampling (FPS)？

**Farthest Point Sampling (FPS，远点采样)** 是一种在点云处理中常用的采样算法，用于从一个点集中选择一组具有代表性的子集点。它通过迭代选择距离已有采样点集最远的点，确保采样点尽可能均匀分布在点云的几何结构上。FPS 的核心思想是“贪心”地挑选那些覆盖点云空间最广泛的点，减少冗余并保留点云的整体形状信息。

在点云处理中，FPS 常用于以下场景：

- **降采样**：从大规模点云中提取较小的点集，降低计算复杂度。
- **关键点提取**：选择代表性点用于后续任务，如点云配准、分割或特征提取。
- **深度学习**：在点云神经网络（如 PointNet）中，FPS 用于选择关键点以构建层次化特征。

通俗来说，FPS 就像在点云这堆“散乱的星星”中，挑出几个最能代表整体分布的点，尽量让这些点覆盖整个形状，而不是扎堆在某一块。

## FPS 的算法步骤

FPS 的核心是迭代选择距离当前采样点集最远的点，以下是具体步骤：

1. **初始化**：
   - 从点云 $S = \{p_1, p_2, …, p_n\}$（包含 $n$ 个点）中随机选择一个点作为第一个采样点，加入采样点集 $S_{\text{sampled}}$。

2. **迭代选择最远点**：
   - 对于点云中剩余的每个点 $p_i$，计算它到当前采样点集 $S_{\text{sampled}}$ 中所有点的**最小距离**（通常用欧几里得距离）。
   - 选择距离 $S_{\text{sampled}}$ 最远的点（即最小距离最大的点），将其加入 $S_{\text{sampled}}$。

3. **重复**：
   - 重复步骤 2，直到采样点集 $S_{\text{sampled}}$ 达到预定数量 $m$（用户指定的采样点数），或者点云中没有剩余点。

4. **输出**：
   - 返回采样点集 $S_{\text{sampled}}$，包含 $m$ 个点。

**关键点**：
- FPS 确保采样点分布均匀，因为它总是优先选择“最孤立”的点。
- 计算距离时，通常使用欧几里得距离（如 $\|p_i - p_j\|_2 = \sqrt{(x_i - x_j)^2 + (y_i - y_j)^2}$ ）。
- 实际实现中，可用 KD 树等数据结构加速最近邻搜索，优化计算效率。



## 简单示例

假设我们有一个二维点云 $S = \{(0, 0), (1, 0), (1, 1), (2, 0), (2, 2)\}$，目标是从中用 FPS 采样 3 个点。

### 步骤 1：初始化
- 随机选择一个点，比如 $(0, 0)$，加入采样点集：

  $$
  S_{\text{sampled}} = \{(0, 0)\}
  $$

### 步骤 2：第一次迭代
- 计算剩余点到 $S_{\text{sampled}} = \{(0, 0)\}$ 的最小距离：
  - $(1, 0)$：距离 $\sqrt{(1-0)^2 + (0-0)^2} = 1$
  - $(1, 1)$：距离 $\sqrt{(1-0)^2 + (1-0)^2} = \sqrt{2} \approx 1.414$
  - $(2, 0)$：距离 $\sqrt{(2-0)^2 + (0-0)^2} = 2$
  - $(2, 2)$：距离 $\sqrt{(2-0)^2 + (2-0)^2} = \sqrt{8} \approx 2.828$
- 选择距离最大的点 $(2, 2)$，加入采样点集：

  $$
  S_{\text{sampled}} = \{(0, 0), (2, 2)\}
  $$

### 步骤 3：第二次迭代
- 计算剩余点到 $S_{\text{sampled}} = \{(0, 0), (2, 2)\}$ 的最小距离：
  - $(1, 0)$：
    - 到 $(0, 0)$：$\sqrt{(1-0)^2 + (0-0)^2} = 1$
    - 到 $(2, 2)$：$\sqrt{(1-2)^2 + (0-2)^2} = \sqrt{5} \approx 2.236$
    - 最小距离：$\min(1, 2.236) = 1$
  - $(1, 1)$：
    - 到 $(0, 0)$：$\sqrt{(1-0)^2 + (1-0)^2} = \sqrt{2} \approx 1.414$
    - 到 $(2, 2)$：$\sqrt{(1-2)^2 + (1-2)^2} = \sqrt{2} \approx 1.414$
    - 最小距离：$\min(1.414, 1.414) = 1.414$
  - $(2, 0)$：
    - 到 $(0, 0)$：$\sqrt{(2-0)^2 + (0-0)^2} = 2$
    - 到 $(2, 2)$：$\sqrt{(2-2)^2 + (0-2)^2} = 2$
    - 最小距离：$\min(2, 2) = 2$
- 选择最小距离最大的点 $(2, 0)$（最小距离为 2），加入采样点集：

  $$
  S_{\text{sampled}} = \{(0, 0), (2, 2), (2, 0)\}
  $$

### 步骤 4：输出
- 采样点集为 $\{(0, 0), (2, 2), (2, 0)\}$，共 3 个点。

**结果分析**：
这三个点分布在点云的“角落”，较好地覆盖了点云的空间范围，体现了 FPS 的均匀采样特性。



## 通俗总结

FPS 就像在点云里找“最有代表性的哨兵”，每次挑一个离当前选定点最远的点，确保选出来的点尽可能分散，能代表整个点云的形状。它的优点是简单、均匀，适合降采样或关键点提取，但计算量可能较大（需要多次距离计算）。在实际应用中，FPS 常用于点云处理的预处理步骤，比如在 PointNet 中选择关键点，或者在 3D 建模中减少点云规模以加速后续计算。