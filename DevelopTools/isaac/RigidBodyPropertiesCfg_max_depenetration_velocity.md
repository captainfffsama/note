#IsaacLab #Isaacsim 

[toc]

# RigidBodyPropertiesCfg 中的 max_depenetration_velocity 作用

在 Isaac Lab (以及底层的 PhysX) 中，`max_depenetration_velocity`（最大去穿透速度）是一个用于**提高物理仿真稳定性**，特别是防止**“物体爆炸”**现象的关键参数。

简单来说，它的作用是：**当物理引擎发现两个刚体发生穿模（重叠）时，限制把它们“推开”的最高速度。**

以下是详细的深度解析：

### 1. 问题的根源：穿模与“爆炸”

在离散时间步（Discrete Time-step）的物理仿真中，如果物体速度很快或者受力很大（例如机械臂用力夹箱子），在一个仿真步长（dt）内，物体可能会不小心“插”进另一个物体内部。

一旦 PhysX 检测到这种穿模（Penetration），它的默认反应是：

- **目标**：在**下一个时间步**立刻修好这个错误，把物体推回表面。
    
- **后果**：如果穿模较深，要想在极短时间（如 0.01s）内退出来，需要极大的速度和加速度。这会产生**巨大的反弹力**。
    
- **现象**：被夹住的箱子突然像子弹一样飞出去，或者机器人疯狂抖动。这就是所谓的“物理爆炸”。
    

### 2. 这个参数的作用：设置限速

`max_depenetration_velocity` 就像一个**减速带**或**安全阀**。

- **如果不设置（默认值通常很大）**：引擎会尝试以 $V = \frac{\text{穿透深度}}{dt}$ 的速度把物体推开。如果深度是 1cm，dt 是 0.005s，推开速度就是 2m/s。如果深度更大，速度会指数级上升。
    
- **如果设置了（例如 1.0 m/s）**：引擎会说：“我知道你们重叠了，我也知道应该推开，但我最多允许你们以 1.0 m/s 的相对速度分开。”
    
    - 结果是：物体不会在一个时间步内完全分开，而是**分摊到随后的几个时间步**慢慢分开。
        

### 3. 在机器人任务中的具体应用

对于你的**“双臂抱箱子”**任务，这个参数**极其重要**，强烈建议设置一个较小的值。

#### A. 防止夹持时飞出 (Pop-out Artifacts)

当你用双臂用力夹箱子时，由于 P 控制器的作用，夹爪可能会轻微嵌入箱子模型内部。

- **高 Depenetration Vel**：物理引擎判定这很不科学，施加巨大的斥力，箱子瞬间被弹飞。
    
- **低 Depenetration Vel** (如 1.0 - 5.0 m/s)：物理引擎会温柔地抵抗这种穿透，箱子会稳稳地停留在手中，看起来就像真实的橡胶挤压效果。
    

#### B. 提高堆叠任务稳定性

如果你把箱子放在桌子上，初始位置算错了，箱子下半部分嵌在桌子里 1cm。

- 设置了此参数后，箱子会缓缓地“挤”出桌面，而不是瞬间弹飞上天。
    

### 4. 推荐设置值

在 `RigidBodyPropertiesCfg` 中：

Python

```
rigid_props = sim_utils.RigidBodyPropertiesCfg(
    # … 其他设置 …
    
    # 推荐值范围：1.0 到 10.0 (单位：米/秒)
    # 对于精密操作或抓取，建议设低一点，比如 1.0 或 2.0
    max_depenetration_velocity=1.0, 
)
```

### 总结

- **含义**：纠正物体穿模时的最大允许回弹速度。
    
- **作用**：防止物理仿真中的剧烈抖动和物体弹飞。
    
- **建议**：在**接触密集型**任务（如抓取、行走、装配）中，务必将其设置为一个较小的合理值（如 `1.0` m/s），这能显著提升 Sim-to-Real 的表现和训练的收敛性。